ASIC Design Flow for a Vending Machine Controller using Open-Source EDA Tools
This repository contains the complete RTL-to-GDSII design flow for a simple Vending Machine Controller. The project's primary goal is to demonstrate a fully open-source ASIC design methodology using tools like Icarus Verilog, Yosys, and the OpenROAD Project, targeting the SkyWater 130nm open-source PDK.

Table of Contents
Project Overview

Design Specification

The Open-Source ASIC Flow

Repository Structure

Prerequisites

Step-by-Step Instructions

Results

License

1. Project Overview
This project provides a practical, hands-on example of creating an Application-Specific Integrated Circuit (ASIC) from a high-level description in Verilog to a final physical layout file (GDSII). It serves as an educational resource for anyone interested in digital IC design without access to expensive, proprietary EDA software.

Key Features:
RTL Design: Simple Finite State Machine (FSM) in Verilog.

Verification: Testbench-based simulation to ensure functional correctness.

Synthesis: Conversion of RTL to a gate-level netlist.

Physical Design: Complete Place and Route flow.

Toolchain: 100% open-source software.

Technology: Targets the SkyWater 130nm (sky130) PDK.

2. Design Specification
The controller is for a vending machine with the following behavior:

Item Price: 10 units.

Coin Value: Accepts a single coin worth 5 units.

Inputs: clk, rst, coin_in, item_select.

Outputs: dispense_item, change_out.

The controller is implemented as a Moore/Mealy FSM.

3. The Open-Source ASIC Flow
The project follows a standard digital design flow:

RTL Design & Simulation (Icarus Verilog): The logic is described in Verilog (vending_machine.v) and verified with a testbench (vending_tb.v).

Logic Synthesis (Yosys): The RTL is converted into a netlist of standard logic gates from the sky130 library.

Physical Design (OpenROAD): The netlist is used to create a physical layout. This multi-stage process includes:

Floorplanning: Defining the chip area and pin locations.

Placement: Placing the standard cells.

Clock Tree Synthesis (CTS): Distributing the clock signal.

Routing: Connecting the cells.

Final GDSII Output: A fabrication-ready layout file.

4. Repository Structure
.
├── design/              # Contains the core RTL design files
│   └── vending_machine.v
├── verification/        # Contains the simulation testbench
│   └── vending_tb.v
├── synthesis/           # Contains synthesis scripts and outputs
│   ├── synthesis.ys
│   └── constraints.sdc
├── layout/              # Contains physical design scripts and outputs
│   └── openroad_flow.tcl
└── README.md            # This file

5. Prerequisites
To run this flow, you must have the following open-source tools installed:

Icarus Verilog: For Verilog compilation and simulation.

Yosys: For logic synthesis.

The OpenROAD Project: For the physical design flow.

SkyWater 130nm PDK: The standard cell libraries and technology files. Ensure the PDK is properly installed and the paths to the lib and lef files are correctly set in the scripts.

6. Step-by-Step Instructions
Step 1: Clone the Repository
git clone [https://github.com/your-username/your-repo-name.git](https://github.com/your-username/your-repo-name.git)
cd your-repo-name

Step 2: Run RTL Simulation
Verify the design's functionality before moving to synthesis.

cd verification
iverilog -o vending_tb ../design/vending_machine.v vending_tb.v
vvp vending_tb

You should see a confirmation message from the testbench indicating that all tests passed.

Step 3: Run Logic Synthesis
Synthesize the Verilog RTL into a gate-level netlist.

Note: You must update the paths to your sky130 PDK .lib files inside synthesis/synthesis.ys.

cd ../synthesis
yosys synthesis.ys

This will generate vending_machine_synth.v in the synthesis directory.

Step 4: Run Physical Design (Place and Route)
Generate the final GDSII layout using OpenROAD.

Note: You must update the paths to your sky130 PDK .lib and .lef files inside layout/openroad_flow.tcl.

cd ../layout
openroad openroad_flow.tcl

This process will take a few minutes. Upon completion, it will generate the final layout file vending_machine.gds and various intermediate reports in the layout directory.

7. Results
Simulation: The design passed all functional tests in the testbench.

Synthesis: The synthesized netlist consists of 3 DFFs and ~30 combinational gates.

Timing Analysis: The design successfully met a 100 MHz clock constraint with significant positive slack.

Physical Layout: A DRC-clean GDSII layout was successfully generated.

Final GDSII Layout
Here is a snapshot of the final layout generated by OpenROAD.


